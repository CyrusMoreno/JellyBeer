<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example1</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>
<div class="container" >
    <h2 id="pageheader">Welcome to Mobile Legends Group Finder</h2>
    <div id="checklist">
            <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center">
            Please wait while we check for similar lineup.
             </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
             When you recieve a notification here, you may start the game and start inviting other users.
             </li>
             <li class="list-group-item d-flex justify-content-between align-items-center">
             Number of player with same line up
             <span class="badge badge-primary badge-pill" id="similarLineupSpan">0</span>
             </li>
             <li class="list-group-item d-flex justify-content-between align-items-center">
             Active users
             <span class="badge badge-primary badge-pill" id="activeUserSpan">1</span>
             </li>
 	  </li>
             <li class="list-group-item d-flex justify-content-between align-items-center">
             This website is free to use but the resources to keep it working isn't. Please consider donating to support our website. Use the donate button.
             </li>
             </ul>
    </div>
</div>
<div class="container" id="fillInForms">
  <div class="form-group">
      <label for="usr">Mobile Legend Ingame Name:</label>
           <input type="text" class="form-control" id="ign">
      <label for="sel1">I want to main this hero (select one):</label>
      <br>
      <select class="form-control" id="main">
        <option>Any Fighter type hero in current meta</option>
        <option>Any Mage type hero in current meta</option>
        <option>Any Support type hero in current meta</option>
        <option>Any Marksman type hero in current meta</option>
        <option>Any Assassin type hero in current meta</option>
        <option>Any Tank type hero in current meta</option>
        <option>Dyrroth</option>
        <option>Badang</option>
        <option>Sun</option>
        <option>Freya</option>
        <option>Guinevere</option>
        <option>Chou</option>
        <option>Terizla</option>
        <option>Minsitthar</option>
        <option>Xborg</option>
        <option>Martis</option>
        <option>Bane</option>
        <option>Aldous</option>
        <option>Akai</option>
        <option>Silvanna</option>
        <option>Zilong</option>
        <option>Alucard</option>
        <option>Ruby</option>
        <option>Thamuz</option>
        <option>Balmond</option>
        <option>Alpha</option>
        <option>Jawhead</option>
        <option>Argus</option>
        <option>Roger</option>
        <option>Lapu-Lapu</option>
        <option>Alice</option>
        <option>Aurora</option>
        <option>Chang'e</option>
        <option>Cyclops</option>
        <option>Esmeralda</option>
        <option>Eudora</option>
        <option>Gord</option>
        <option>Harith</option>
        <option>Harley</option>
        <option>Nana</option>
        <option>Odette</option>
        <option>Pharsa</option>
        <option>Vale</option>
        <option>Valir</option>
        <option>Vexana</option>
        <option>Zhask</option>
        <option>Diggie</option>
        <option>Carmilla</option>
        <option>Angela</option>
        <option>Estes</option>
        <option>Faramis</option>
        <option>Kaja</option>
        <option>Rafaela</option>
        <option>Franco</option>
        <option>Baxia</option>
        <option>Belerick</option>
        <option>Gatotkaca</option>
        <option>Grock</option>
        <option>Hilda</option>
        <option>Hylos</option>
        <option>Johnson</option>
        <option>Khufra</option>
        <option>Lolita</option>
        <option>Minotaur</option>
        <option>Tigreal</option>
        <option>Uranus</option>
        <option>Masha</option>
        <option>Bruno</option>
        <option>Claude</option>
        <option>Clint</option>
        <option>Granger</option>
        <option>Hanabi</option>
        <option>Irithel</option>
        <option>Karrie</option>
        <option>Kimmy</option>
        <option>Layla</option>
        <option>Lesley</option>
        <option>Miya</option>
        <option>Moskov</option>
        <option>Yi Sun-shin</option>
        <option>Fanny</option>
        <option>Gusion</option>
        <option>Hanzo</option>
        <option>Hayabusa</option>
        <option>Helcurt</option>
        <option>Karina</option>
        <option>Lancelot</option>
        <option>Ling</option>
        <option>Natalia</option>
        <option>Saber</option>
        <option>Selena</option>
        <option>Wanwan</option>
      </select>
      <br>
      <label for="sel1">Select a second hero for your line up:</label>
      <select class="form-control" id="second">
<option>Any Fighter type hero in current meta</option>
        <option>Any Mage type hero in current meta</option>
        <option>Any Support type hero in current meta</option>
        <option>Any Marksman type hero in current meta</option>
        <option>Any Assassin type hero in current meta</option>
        <option>Any Tank type hero in current meta</option>
        <option>Dyrroth</option>
        <option>Badang</option>
        <option>Sun</option>
        <option>Freya</option>
        <option>Guinevere</option>
        <option>Chou</option>
        <option>Terizla</option>
        <option>Minsitthar</option>
        <option>Xborg</option>
        <option>Martis</option>
        <option>Bane</option>
        <option>Aldous</option>
        <option>Akai</option>
        <option>Silvanna</option>
        <option>Zilong</option>
        <option>Alucard</option>
        <option>Ruby</option>
        <option>Thamuz</option>
        <option>Balmond</option>
        <option>Alpha</option>
        <option>Jawhead</option>
        <option>Argus</option>
        <option>Roger</option>
        <option>Lapu-Lapu</option>
        <option>Alice</option>
        <option>Aurora</option>
        <option>Chang'e</option>
        <option>Cyclops</option>
        <option>Esmeralda</option>
        <option>Eudora</option>
        <option>Gord</option>
        <option>Harith</option>
        <option>Harley</option>
        <option>Nana</option>
        <option>Odette</option>
        <option>Pharsa</option>
        <option>Vale</option>
        <option>Valir</option>
        <option>Vexana</option>
        <option>Zhask</option>
        <option>Diggie</option>
        <option>Carmilla</option>
        <option>Angela</option>
        <option>Estes</option>
        <option>Faramis</option>
        <option>Kaja</option>
        <option>Rafaela</option>
        <option>Franco</option>
        <option>Baxia</option>
        <option>Belerick</option>
        <option>Gatotkaca</option>
        <option>Grock</option>
        <option>Hilda</option>
        <option>Hylos</option>
        <option>Johnson</option>
        <option>Khufra</option>
        <option>Lolita</option>
        <option>Minotaur</option>
        <option>Tigreal</option>
        <option>Uranus</option>
        <option>Masha</option>
        <option>Bruno</option>
        <option>Claude</option>
        <option>Clint</option>
        <option>Granger</option>
        <option>Hanabi</option>
        <option>Irithel</option>
        <option>Karrie</option>
        <option>Kimmy</option>
        <option>Layla</option>
        <option>Lesley</option>
        <option>Miya</option>
        <option>Moskov</option>
        <option>Yi Sun-shin</option>
        <option>Fanny</option>
        <option>Gusion</option>
        <option>Hanzo</option>
        <option>Hayabusa</option>
        <option>Helcurt</option>
        <option>Karina</option>
        <option>Lancelot</option>
        <option>Ling</option>
        <option>Natalia</option>
        <option>Saber</option>
        <option>Selena</option>
        <option>Wanwan</option>
      </select>
      <br>
      <label for="sel1">Select a third hero for your line up:</label>
      <select class="form-control" id="3rd">
<option>Any Fighter type hero in current meta</option>
        <option>Any Mage type hero in current meta</option>
        <option>Any Support type hero in current meta</option>
        <option>Any Marksman type hero in current meta</option>
        <option>Any Assassin type hero in current meta</option>
        <option>Any Tank type hero in current meta</option>
        <option>Dyrroth</option>
        <option>Badang</option>
        <option>Sun</option>
        <option>Freya</option>
        <option>Guinevere</option>
        <option>Chou</option>
        <option>Terizla</option>
        <option>Minsitthar</option>
        <option>Xborg</option>
        <option>Martis</option>
        <option>Bane</option>
        <option>Aldous</option>
        <option>Akai</option>
        <option>Silvanna</option>
        <option>Zilong</option>
        <option>Alucard</option>
        <option>Ruby</option>
        <option>Thamuz</option>
        <option>Balmond</option>
        <option>Alpha</option>
        <option>Jawhead</option>
        <option>Argus</option>
        <option>Roger</option>
        <option>Lapu-Lapu</option>
        <option>Alice</option>
        <option>Aurora</option>
        <option>Chang'e</option>
        <option>Cyclops</option>
        <option>Esmeralda</option>
        <option>Eudora</option>
        <option>Gord</option>
        <option>Harith</option>
        <option>Harley</option>
        <option>Nana</option>
        <option>Odette</option>
        <option>Pharsa</option>
        <option>Vale</option>
        <option>Valir</option>
        <option>Vexana</option>
        <option>Zhask</option>
        <option>Diggie</option>
        <option>Carmilla</option>
        <option>Angela</option>
        <option>Estes</option>
        <option>Faramis</option>
        <option>Kaja</option>
        <option>Rafaela</option>
        <option>Franco</option>
        <option>Baxia</option>
        <option>Belerick</option>
        <option>Gatotkaca</option>
        <option>Grock</option>
        <option>Hilda</option>
        <option>Hylos</option>
        <option>Johnson</option>
        <option>Khufra</option>
        <option>Lolita</option>
        <option>Minotaur</option>
        <option>Tigreal</option>
        <option>Uranus</option>
        <option>Masha</option>
        <option>Bruno</option>
        <option>Claude</option>
        <option>Clint</option>
        <option>Granger</option>
        <option>Hanabi</option>
        <option>Irithel</option>
        <option>Karrie</option>
        <option>Kimmy</option>
        <option>Layla</option>
        <option>Lesley</option>
        <option>Miya</option>
        <option>Moskov</option>
        <option>Yi Sun-shin</option>
        <option>Fanny</option>
        <option>Gusion</option>
        <option>Hanzo</option>
        <option>Hayabusa</option>
        <option>Helcurt</option>
        <option>Karina</option>
        <option>Lancelot</option>
        <option>Ling</option>
        <option>Natalia</option>
        <option>Saber</option>
        <option>Selena</option>
        <option>Wanwan</option>
      </select>
      <br>
      <label for="sel1">Select a fourth hero for your line up:</label>
      <select class="form-control" id="4th">
<option>Any Fighter type hero in current meta</option>
        <option>Any Mage type hero in current meta</option>
        <option>Any Support type hero in current meta</option>
        <option>Any Marksman type hero in current meta</option>
        <option>Any Assassin type hero in current meta</option>
        <option>Any Tank type hero in current meta</option>
        <option>Dyrroth</option>
        <option>Badang</option>
        <option>Sun</option>
        <option>Freya</option>
        <option>Guinevere</option>
        <option>Chou</option>
        <option>Terizla</option>
        <option>Minsitthar</option>
        <option>Xborg</option>
        <option>Martis</option>
        <option>Bane</option>
        <option>Aldous</option>
        <option>Akai</option>
        <option>Silvanna</option>
        <option>Zilong</option>
        <option>Alucard</option>
        <option>Ruby</option>
        <option>Thamuz</option>
        <option>Balmond</option>
        <option>Alpha</option>
        <option>Jawhead</option>
        <option>Argus</option>
        <option>Roger</option>
        <option>Lapu-Lapu</option>
        <option>Alice</option>
        <option>Aurora</option>
        <option>Chang'e</option>
        <option>Cyclops</option>
        <option>Esmeralda</option>
        <option>Eudora</option>
        <option>Gord</option>
        <option>Harith</option>
        <option>Harley</option>
        <option>Nana</option>
        <option>Odette</option>
        <option>Pharsa</option>
        <option>Vale</option>
        <option>Valir</option>
        <option>Vexana</option>
        <option>Zhask</option>
        <option>Diggie</option>
        <option>Carmilla</option>
        <option>Angela</option>
        <option>Estes</option>
        <option>Faramis</option>
        <option>Kaja</option>
        <option>Rafaela</option>
        <option>Franco</option>
        <option>Baxia</option>
        <option>Belerick</option>
        <option>Gatotkaca</option>
        <option>Grock</option>
        <option>Hilda</option>
        <option>Hylos</option>
        <option>Johnson</option>
        <option>Khufra</option>
        <option>Lolita</option>
        <option>Minotaur</option>
        <option>Tigreal</option>
        <option>Uranus</option>
        <option>Masha</option>
        <option>Bruno</option>
        <option>Claude</option>
        <option>Clint</option>
        <option>Granger</option>
        <option>Hanabi</option>
        <option>Irithel</option>
        <option>Karrie</option>
        <option>Kimmy</option>
        <option>Layla</option>
        <option>Lesley</option>
        <option>Miya</option>
        <option>Moskov</option>
        <option>Yi Sun-shin</option>
        <option>Fanny</option>
        <option>Gusion</option>
        <option>Hanzo</option>
        <option>Hayabusa</option>
        <option>Helcurt</option>
        <option>Karina</option>
        <option>Lancelot</option>
        <option>Ling</option>
        <option>Natalia</option>
        <option>Saber</option>
        <option>Selena</option>
        <option>Wanwan</option>
      </select>
      <br>
      <label for="sel1">Select a fifth hero for your line up:</label>
      <select class="form-control" id="5th">
<option>Any Fighter type hero in current meta</option>
        <option>Any Mage type hero in current meta</option>
        <option>Any Support type hero in current meta</option>
        <option>Any Marksman type hero in current meta</option>
        <option>Any Assassin type hero in current meta</option>
        <option>Any Tank type hero in current meta</option>
        <option>Dyrroth</option>
        <option>Badang</option>
        <option>Sun</option>
        <option>Freya</option>
        <option>Guinevere</option>
        <option>Chou</option>
        <option>Terizla</option>
        <option>Minsitthar</option>
        <option>Xborg</option>
        <option>Martis</option>
        <option>Bane</option>
        <option>Aldous</option>
        <option>Akai</option>
        <option>Silvanna</option>
        <option>Zilong</option>
        <option>Alucard</option>
        <option>Ruby</option>
        <option>Thamuz</option>
        <option>Balmond</option>
        <option>Alpha</option>
        <option>Jawhead</option>
        <option>Argus</option>
        <option>Roger</option>
        <option>Lapu-Lapu</option>
        <option>Alice</option>
        <option>Aurora</option>
        <option>Chang'e</option>
        <option>Cyclops</option>
        <option>Esmeralda</option>
        <option>Eudora</option>
        <option>Gord</option>
        <option>Harith</option>
        <option>Harley</option>
        <option>Nana</option>
        <option>Odette</option>
        <option>Pharsa</option>
        <option>Vale</option>
        <option>Valir</option>
        <option>Vexana</option>
        <option>Zhask</option>
        <option>Diggie</option>
        <option>Carmilla</option>
        <option>Angela</option>
        <option>Estes</option>
        <option>Faramis</option>
        <option>Kaja</option>
        <option>Rafaela</option>
        <option>Franco</option>
        <option>Baxia</option>
        <option>Belerick</option>
        <option>Gatotkaca</option>
        <option>Grock</option>
        <option>Hilda</option>
        <option>Hylos</option>
        <option>Johnson</option>
        <option>Khufra</option>
        <option>Lolita</option>
        <option>Minotaur</option>
        <option>Tigreal</option>
        <option>Uranus</option>
        <option>Masha</option>
        <option>Bruno</option>
        <option>Claude</option>
        <option>Clint</option>
        <option>Granger</option>
        <option>Hanabi</option>
        <option>Irithel</option>
        <option>Karrie</option>
        <option>Kimmy</option>
        <option>Layla</option>
        <option>Lesley</option>
        <option>Miya</option>
        <option>Moskov</option>
        <option>Yi Sun-shin</option>
        <option>Fanny</option>
        <option>Gusion</option>
        <option>Hanzo</option>
        <option>Hayabusa</option>
        <option>Helcurt</option>
        <option>Karina</option>
        <option>Lancelot</option>
        <option>Ling</option>
        <option>Natalia</option>
        <option>Saber</option>
        <option>Selena</option>
        <option>Wanwan</option>
      </select>
      <br>
      <label for="sel1">Your location:</label>
      <select class="form-control" id="region">
        <option>Asia</option>
        <option>Europe</option>
        <option>North America</option>
        <option>South America</option>
        <option>Australia</option>
        <option>Antartica</option>
      </select>
      <br>

   <!-- Trigger the modal with a button -->
   <button type="button" class="btn btn-outline-secondary" id="saiBtn">Search</button>
   </div>
 </div>

  <!-- Modal -->
  <div class="modal fade" id="myNotif" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">ML Group Finder</h4>
        </div>
        <div class="modal-body">
          <p id="notifyMsg">We will notify you again if another users' lineup match yours.</p>
        </div>
        <div class="modal-footer">
           <button id="groupUpBtn" type="button" class="btn btn-primary" data-dismiss="modal">Close</button> 
        </div>
      </div>    
    </div>
   </div>


<script>
var tossCoin;
var interval = 50000;
var update = setInterval(timerNotif, interval);
var  toggleMe = false;
var  formSubmitted = false;
var userCnt = 1;
var similarLineupCnt = 0;
var socket;
var form;
var lineup;
var list = document.getElementById("checklist");
socket = io.connect('http://206.189.243.208:2010');
socket.on('sendToAll', rcvLineups);


$(document).ready(function(){
   list.style.display = "none";
   $("#groupUpBtn").click(function(){
	 if(formSubmitted==true){toggleMe = false;}
  });
  $("#saiBtn").click( function(){
     $("#myNotif").modal();
     passItIn();
  });
});

function timerNotif() {
         var d = new Date();
         if(formSubmitted==true){ interval = (Math.random() * 5)*10000;socket.emit('sendToAll', form);}
}

async function passItIn(){
            var flag = {}
            var exist2arr = [];           
            var x = document.getElementById("fillInForms");
            var ingameName = document.getElementById("ign").value;
            var firstPick = document.getElementById("main").value;
            var secondPick = document.getElementById("second").value;    
            var thirdPick = document.getElementById("3rd").value;   
            var fourthPick = document.getElementById("4th").value; 
            var fifthPick = document.getElementById("5th").value; 
            var currRegion = document.getElementById("region").value;        
        	 form = { username: ingameName, main: firstPick , sidekick: secondPick, thirdHero: thirdPick, fourthHero: fourthPick, fifthHero: fifthPick, region: currRegion, appID: 'TNwb1l66Ze0'};
            lineup = [form.main, form.sidekick, form.thirdHero, form.fourthHero, form.fifthHero ]; 
            for(var i = 0; i < lineup.length; i++){
                  for(var j = 0 ; j < lineup.length; j ++){
                           if(i !=j && lineup[i] == lineup[j]){
                                   if(!flag[lineup[i]])
                                   exist2arr.push(lineup[i]);
                                   flag[lineup[i]] = 1;
                   }
                 }
              }
            
            if(exist2arr.length < 1){
                 await socket.emit('sendToAll', form);
                 document.getElementById("pageheader").innerHTML = "Mobile Legends Group Finder";
                 x.style.display = "none";  //once the form have been submitted, it cant be changed anymore
                 list.style.display = "block";
                  }else{

            }
            formSubmitted = true;	
}


function rcvLineups(data){                     
        document.getElementById("activeUserSpan").innerHTML = userCnt + 1;     
        if(form.appID == data.appID){if(form.username != data.username){if(form.region == data.region){if(form.main != data.main){if(lineup.includes(data.main)){ if(lineup.includes(data.sidekick)){  if(lineup.includes(data.thirdHero)){if(lineup.includes(data.fourthHero)){  if(lineup.includes(data.fifthHero)){
        if(toggleMe == false){
            document.getElementById("similarLineupSpan").innerHTML = similarLineupCnt + 1;
            toggleMe = true;
	document.getElementById("notifyMsg").innerHTML =  "A user named " + data.username + " who mained a hero " + data.main + " matched your lineup"; 
           $("#myNotif").modal(); 
       }
 }}}}}}}}}
}
</script>

</body>
</html>